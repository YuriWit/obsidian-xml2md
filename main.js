/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var MyPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const ribbonIconEl = this.addRibbonIcon("file-input", "XML to Markdown", (evt) => {
      new import_obsidian.Notice("This is a notice!");
      new SampleModal(this.app, (result) => {
        new import_obsidian.Notice(`Hello, ${result}!`);
      }).open();
    });
    this.addSettingTab(new SampleSettingTab(this.app, this));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var SampleModal = class extends import_obsidian.Modal {
  constructor(app, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian.Setting(contentEl).setHeading().setName("Import XML Data");
    const importSettingsContainer = contentEl.createDiv(
      "statblock-additional-container"
    );
    new import_obsidian.Setting(importSettingsContainer).setDesc(
      "Import data from xml files. Monsters are stored by name, so only the last creature by that name will be saved. This is destructive - any saved creature will be overwritten."
    );
    const importAdditional = importSettingsContainer.createDiv("additional");
    const importAppFile = new import_obsidian.Setting(importAdditional).setName("Import DnDAppFile").setDesc("Only import content that you own.");
    const inputAppFile = createEl("input", {
      attr: {
        type: "file",
        name: "dndappfile",
        accept: ".xml",
        multiple: true
      }
    });
    inputAppFile.onchange = async () => {
      const { files } = inputAppFile;
      if (!files.length)
        return;
      try {
        const { files: files2 } = inputAppFile;
        if (!files2.length)
          return;
        const monsters = await this.importer.import(files2, "appfile");
        if (monsters && monsters.length) {
          await this.plugin.saveMonsters(monsters);
        }
        this.display();
      } catch (e) {
      }
    };
    importAppFile.addButton((b) => {
      b.setButtonText("Choose File(s)").setTooltip(
        "Import DnDAppFile Data"
      );
      b.buttonEl.addClass("statblock-file-upload");
      b.buttonEl.appendChild(inputAppFile);
      b.onClick(() => inputAppFile.click());
    });
    new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Submit").setCta().onClick(() => {
      this.close();
      this.onSubmit(this.result);
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setHeading().setName("Import Homebrew Creatures");
    const importSettingsContainer = containerEl.createDiv(
      "statblock-additional-container"
    );
    new import_obsidian.Setting(importSettingsContainer).setDesc(
      "Import creatures from creature files. Monsters are stored by name, so only the last creature by that name will be saved. This is destructive - any saved creature will be overwritten."
    );
    const importAdditional = importSettingsContainer.createDiv("additional");
    const importAppFile = new import_obsidian.Setting(importAdditional).setName("Import DnDAppFile").setDesc("Only import content that you own.");
    const inputAppFile = createEl("input", {
      attr: {
        type: "file",
        name: "dndappfile",
        accept: ".xml",
        multiple: true
      }
    });
    inputAppFile.onchange = async () => {
      const { files } = inputAppFile;
      if (!files.length)
        return;
      try {
        const { files: files2 } = inputAppFile;
        if (!files2.length)
          return;
        const monsters = await this.importer.import(files2, "appfile");
        if (monsters && monsters.length) {
          await this.plugin.saveMonsters(monsters);
        }
        this.display();
      } catch (e) {
      }
    };
    importAppFile.addButton((b) => {
      b.setButtonText("Choose File(s)").setTooltip(
        "Import DnDAppFile Data"
      );
      b.buttonEl.addClass("statblock-file-upload");
      b.buttonEl.appendChild(inputAppFile);
      b.onClick(() => inputAppFile.click());
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XHJcblx0bXlTZXR0aW5nOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0bXlTZXR0aW5nOiAnZGVmYXVsdCdcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignZmlsZS1pbnB1dCcsICdYTUwgdG8gTWFya2Rvd24nLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdC8vIENhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgaWNvbi5cclxuXHRcdFx0bmV3IE5vdGljZSgnVGhpcyBpcyBhIG5vdGljZSEnKTtcclxuXHRcdFx0bmV3IFNhbXBsZU1vZGFsKHRoaXMuYXBwLCAocmVzdWx0KSA9PiB7XHJcblx0XHRcdFx0bmV3IE5vdGljZShgSGVsbG8sICR7cmVzdWx0fSFgKTtcclxuXHRcdFx0ICB9KS5vcGVuKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyAvLyBQZXJmb3JtIGFkZGl0aW9uYWwgdGhpbmdzIHdpdGggdGhlIHJpYmJvblxyXG5cdFx0Ly8gcmliYm9uSWNvbkVsLmFkZENsYXNzKCdteS1wbHVnaW4tcmliYm9uLWNsYXNzJyk7XHJcblxyXG5cdFx0Ly8gLy8gVGhpcyBhZGRzIGEgc3RhdHVzIGJhciBpdGVtIHRvIHRoZSBib3R0b20gb2YgdGhlIGFwcC4gRG9lcyBub3Qgd29yayBvbiBtb2JpbGUgYXBwcy5cclxuXHRcdC8vIGNvbnN0IHN0YXR1c0Jhckl0ZW1FbCA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xyXG5cdFx0Ly8gc3RhdHVzQmFySXRlbUVsLnNldFRleHQoJ1N0YXR1cyBCYXIgVGV4dCcpO1xyXG5cclxuXHRcdC8vIC8vIFRoaXMgYWRkcyBhIHNpbXBsZSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxyXG5cdFx0Ly8gdGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdC8vIFx0aWQ6ICdvcGVuLXNhbXBsZS1tb2RhbC1zaW1wbGUnLFxyXG5cdFx0Ly8gXHRuYW1lOiAnT3BlbiBzYW1wbGUgbW9kYWwgKHNpbXBsZSknLFxyXG5cdFx0Ly8gXHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0Ly8gXHRcdG5ldyBTYW1wbGVNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xyXG5cdFx0Ly8gXHR9XHJcblx0XHQvLyB9KTtcclxuXHJcblx0XHQvLyAvLyBUaGlzIGFkZHMgYW4gZWRpdG9yIGNvbW1hbmQgdGhhdCBjYW4gcGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvbiB0aGUgY3VycmVudCBlZGl0b3IgaW5zdGFuY2VcclxuXHRcdC8vIHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHQvLyBcdGlkOiAnc2FtcGxlLWVkaXRvci1jb21tYW5kJyxcclxuXHRcdC8vIFx0bmFtZTogJ1NhbXBsZSBlZGl0b3IgY29tbWFuZCcsXHJcblx0XHQvLyBcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xyXG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKGVkaXRvci5nZXRTZWxlY3Rpb24oKSk7XHJcblx0XHQvLyBcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oJ1NhbXBsZSBFZGl0b3IgQ29tbWFuZCcpO1xyXG5cdFx0Ly8gXHR9XHJcblx0XHQvLyB9KTtcclxuXHJcblx0XHQvLyAvLyBUaGlzIGFkZHMgYSBjb21wbGV4IGNvbW1hbmQgdGhhdCBjYW4gY2hlY2sgd2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgYXBwIGFsbG93cyBleGVjdXRpb24gb2YgdGhlIGNvbW1hbmRcclxuXHRcdC8vIHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHQvLyBcdGlkOiAnb3Blbi1zYW1wbGUtbW9kYWwtY29tcGxleCcsXHJcblx0XHQvLyBcdG5hbWU6ICdPcGVuIHNhbXBsZSBtb2RhbCAoY29tcGxleCknLFxyXG5cdFx0Ly8gXHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcclxuXHRcdC8vIFx0XHQvLyBDb25kaXRpb25zIHRvIGNoZWNrXHJcblx0XHQvLyBcdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdC8vIFx0XHRpZiAobWFya2Rvd25WaWV3KSB7XHJcblx0XHQvLyBcdFx0XHQvLyBJZiBjaGVja2luZyBpcyB0cnVlLCB3ZSdyZSBzaW1wbHkgXCJjaGVja2luZ1wiIGlmIHRoZSBjb21tYW5kIGNhbiBiZSBydW4uXHJcblx0XHQvLyBcdFx0XHQvLyBJZiBjaGVja2luZyBpcyBmYWxzZSwgdGhlbiB3ZSB3YW50IHRvIGFjdHVhbGx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbi5cclxuXHRcdC8vIFx0XHRcdGlmICghY2hlY2tpbmcpIHtcclxuXHRcdC8vIFx0XHRcdFx0bmV3IFNhbXBsZU1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XHJcblx0XHQvLyBcdFx0XHR9XHJcblxyXG5cdFx0Ly8gXHRcdFx0Ly8gVGhpcyBjb21tYW5kIHdpbGwgb25seSBzaG93IHVwIGluIENvbW1hbmQgUGFsZXR0ZSB3aGVuIHRoZSBjaGVjayBmdW5jdGlvbiByZXR1cm5zIHRydWVcclxuXHRcdC8vIFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0Ly8gXHRcdH1cclxuXHRcdC8vIFx0fVxyXG5cdFx0Ly8gfSk7XHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuXHRcdC8vIC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXHJcblx0XHQvLyAvLyBVc2luZyB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIHdoZW4gdGhpcyBwbHVnaW4gaXMgZGlzYWJsZWQuXHJcblx0XHQvLyB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2coJ2NsaWNrJywgZXZ0KTtcclxuXHRcdC8vIH0pO1xyXG5cclxuXHRcdC8vIC8vIFdoZW4gcmVnaXN0ZXJpbmcgaW50ZXJ2YWxzLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBjbGVhciB0aGUgaW50ZXJ2YWwgd2hlbiB0aGUgcGx1Z2luIGlzIGRpc2FibGVkLlxyXG5cdFx0Ly8gdGhpcy5yZWdpc3RlckludGVydmFsKHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiBjb25zb2xlLmxvZygnc2V0SW50ZXJ2YWwnKSwgNSAqIDYwICogMTAwMCkpO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblxyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgU2FtcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cmVzdWx0OiBzdHJpbmc7XHJcblx0b25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXRIZWFkaW5nKClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJbXBvcnQgWE1MIERhdGFcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGltcG9ydFNldHRpbmdzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdihcclxuICAgICAgICAgICAgXCJzdGF0YmxvY2stYWRkaXRpb25hbC1jb250YWluZXJcIlxyXG4gICAgICAgICk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoaW1wb3J0U2V0dGluZ3NDb250YWluZXIpLnNldERlc2MoXHJcbiAgICAgICAgICAgIFwiSW1wb3J0IGRhdGEgZnJvbSB4bWwgZmlsZXMuIE1vbnN0ZXJzIGFyZSBzdG9yZWQgYnkgbmFtZSwgc28gb25seSB0aGUgbGFzdCBjcmVhdHVyZSBieSB0aGF0IG5hbWUgd2lsbCBiZSBzYXZlZC4gVGhpcyBpcyBkZXN0cnVjdGl2ZSAtIGFueSBzYXZlZCBjcmVhdHVyZSB3aWxsIGJlIG92ZXJ3cml0dGVuLlwiXHJcbiAgICAgICAgKTtcclxuXHJcblx0XHRjb25zdCBpbXBvcnRBZGRpdGlvbmFsID1cclxuXHRcdFx0aW1wb3J0U2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KFwiYWRkaXRpb25hbFwiKTtcclxuXHJcblx0XHRjb25zdCBpbXBvcnRBcHBGaWxlID0gbmV3IFNldHRpbmcoaW1wb3J0QWRkaXRpb25hbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJbXBvcnQgRG5EQXBwRmlsZVwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIk9ubHkgaW1wb3J0IGNvbnRlbnQgdGhhdCB5b3Ugb3duLlwiKTtcclxuXHJcblx0XHRjb25zdCBpbnB1dEFwcEZpbGUgPSBjcmVhdGVFbChcImlucHV0XCIsIHtcclxuXHRcdFx0YXR0cjoge1xyXG5cdFx0XHRcdHR5cGU6IFwiZmlsZVwiLFxyXG5cdFx0XHRcdG5hbWU6IFwiZG5kYXBwZmlsZVwiLFxyXG5cdFx0XHRcdGFjY2VwdDogXCIueG1sXCIsXHJcblx0XHRcdFx0bXVsdGlwbGU6IHRydWVcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aW5wdXRBcHBGaWxlLm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IGZpbGVzIH0gPSBpbnB1dEFwcEZpbGU7XHJcbiAgICAgICAgICAgIGlmICghZmlsZXMubGVuZ3RoKSByZXR1cm47XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGZpbGVzIH0gPSBpbnB1dEFwcEZpbGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGVzLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9uc3RlcnMgPSBhd2FpdCB0aGlzLmltcG9ydGVyLmltcG9ydChmaWxlcywgXCJhcHBmaWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vbnN0ZXJzICYmIG1vbnN0ZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVNb25zdGVycyhtb25zdGVycyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cclxuICAgICAgICB9O1xyXG5cclxuXHRcdGltcG9ydEFwcEZpbGUuYWRkQnV0dG9uKChiKSA9PiB7XHJcbiAgICAgICAgICAgIGIuc2V0QnV0dG9uVGV4dChcIkNob29zZSBGaWxlKHMpXCIpLnNldFRvb2x0aXAoXHJcbiAgICAgICAgICAgICAgICBcIkltcG9ydCBEbkRBcHBGaWxlIERhdGFcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBiLmJ1dHRvbkVsLmFkZENsYXNzKFwic3RhdGJsb2NrLWZpbGUtdXBsb2FkXCIpO1xyXG4gICAgICAgICAgICBiLmJ1dHRvbkVsLmFwcGVuZENoaWxkKGlucHV0QXBwRmlsZSk7XHJcbiAgICAgICAgICAgIGIub25DbGljaygoKSA9PiBpbnB1dEFwcEZpbGUuY2xpY2soKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIlN1Ym1pdFwiKVxyXG5cdFx0XHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5vblN1Ym1pdCh0aGlzLnJlc3VsdCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBNeVBsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXRIZWFkaW5nKClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJbXBvcnQgSG9tZWJyZXcgQ3JlYXR1cmVzXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBpbXBvcnRTZXR0aW5nc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdihcclxuICAgICAgICAgICAgXCJzdGF0YmxvY2stYWRkaXRpb25hbC1jb250YWluZXJcIlxyXG4gICAgICAgICk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoaW1wb3J0U2V0dGluZ3NDb250YWluZXIpLnNldERlc2MoXHJcbiAgICAgICAgICAgIFwiSW1wb3J0IGNyZWF0dXJlcyBmcm9tIGNyZWF0dXJlIGZpbGVzLiBNb25zdGVycyBhcmUgc3RvcmVkIGJ5IG5hbWUsIHNvIG9ubHkgdGhlIGxhc3QgY3JlYXR1cmUgYnkgdGhhdCBuYW1lIHdpbGwgYmUgc2F2ZWQuIFRoaXMgaXMgZGVzdHJ1Y3RpdmUgLSBhbnkgc2F2ZWQgY3JlYXR1cmUgd2lsbCBiZSBvdmVyd3JpdHRlbi5cIlxyXG4gICAgICAgICk7XHJcblxyXG5cdFx0Y29uc3QgaW1wb3J0QWRkaXRpb25hbCA9XHJcblx0XHRcdGltcG9ydFNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdihcImFkZGl0aW9uYWxcIik7XHJcblxyXG5cdFx0Y29uc3QgaW1wb3J0QXBwRmlsZSA9IG5ldyBTZXR0aW5nKGltcG9ydEFkZGl0aW9uYWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSW1wb3J0IERuREFwcEZpbGVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJPbmx5IGltcG9ydCBjb250ZW50IHRoYXQgeW91IG93bi5cIik7XHJcblxyXG5cdFx0Y29uc3QgaW5wdXRBcHBGaWxlID0gY3JlYXRlRWwoXCJpbnB1dFwiLCB7XHJcblx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHR0eXBlOiBcImZpbGVcIixcclxuXHRcdFx0XHRuYW1lOiBcImRuZGFwcGZpbGVcIixcclxuXHRcdFx0XHRhY2NlcHQ6IFwiLnhtbFwiLFxyXG5cdFx0XHRcdG11bHRpcGxlOiB0cnVlXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGlucHV0QXBwRmlsZS5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgeyBmaWxlcyB9ID0gaW5wdXRBcHBGaWxlO1xyXG4gICAgICAgICAgICBpZiAoIWZpbGVzLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBmaWxlcyB9ID0gaW5wdXRBcHBGaWxlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlcy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnN0ZXJzID0gYXdhaXQgdGhpcy5pbXBvcnRlci5pbXBvcnQoZmlsZXMsIFwiYXBwZmlsZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChtb25zdGVycyAmJiBtb25zdGVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlTW9uc3RlcnMobW9uc3RlcnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XHJcbiAgICAgICAgfTtcclxuXHJcblx0XHRpbXBvcnRBcHBGaWxlLmFkZEJ1dHRvbigoYikgPT4ge1xyXG4gICAgICAgICAgICBiLnNldEJ1dHRvblRleHQoXCJDaG9vc2UgRmlsZShzKVwiKS5zZXRUb29sdGlwKFxyXG4gICAgICAgICAgICAgICAgXCJJbXBvcnQgRG5EQXBwRmlsZSBEYXRhXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgYi5idXR0b25FbC5hZGRDbGFzcyhcInN0YXRibG9jay1maWxlLXVwbG9hZFwiKTtcclxuICAgICAgICAgICAgYi5idXR0b25FbC5hcHBlbmRDaGlsZChpbnB1dEFwcEZpbGUpO1xyXG4gICAgICAgICAgICBiLm9uQ2xpY2soKCkgPT4gaW5wdXRBcHBGaWxlLmNsaWNrKCkpO1xyXG4gICAgICAgIH0pO1xyXG5cdH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQTRGO0FBUTVGLElBQU0sbUJBQXFDO0FBQUEsRUFDMUMsV0FBVztBQUNaO0FBRUEsSUFBcUIsV0FBckIsY0FBc0MsdUJBQU87QUFBQSxFQUc1QyxNQUFNLFNBQVM7QUFDZCxVQUFNLEtBQUssYUFBYTtBQUV4QixVQUFNLGVBQWUsS0FBSyxjQUFjLGNBQWMsbUJBQW1CLENBQUMsUUFBb0I7QUFFN0YsVUFBSSx1QkFBTyxtQkFBbUI7QUFDOUIsVUFBSSxZQUFZLEtBQUssS0FBSyxDQUFDLFdBQVc7QUFDckMsWUFBSSx1QkFBTyxVQUFVLFNBQVM7QUFBQSxNQUM3QixDQUFDLEVBQUUsS0FBSztBQUFBLElBQ1gsQ0FBQztB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
